{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = \"45130160-d43b37f420c01d8101f282345\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\n\n\nexport async function fetchImages(query, page = 1) {\n  const response = await axios.get(BASE_URL, {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      per_page: 15,\n      page: page,\n    },\n  });\n  return response.data;\n}\n\n","\n\nexport function renderImages(images) {\n  const gallery = document.querySelector('.gallery');\n  // gallery.innerHTML = '';\n\n  const markup = images.map(image => {\n    return `\n      \n        <a href=\"${image.largeImageURL}\">\n\n        <div class=\"photo-card\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n\n        <div class=\"info\">\n          <p class=\"info-item\">\n            Likes <span>${image.likes}</span>\n          </p>\n          <p class=\"info-item\">\n            Views <span>${image.views}</span>\n          </p>\n          <p class=\"info-item\">\n            Comments<span>${image.comments}</span>\n          </p>\n          <p class=\"info-item\">\n            Downloads <span>${image.downloads}</span>\n          </p>\n        </div>\n      </div>\n    </a>`;\n  }).join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n   \n}\n\nexport function clearGallery() {\n    const gallery = document.querySelector('.gallery');\n    gallery.innerHTML = '';\n}\n\n\n\n","\nimport { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, clearGallery } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const form = document.querySelector('.form');\n  const input = form.querySelector('input[name=\"query\"]');\n  const loader = document.querySelector('.loader');\n  const loadMoreBtn = document.querySelector('.load');\n\n  let currentPage = 1;\n  let currentQuery = '';\n  let totalHits = 0;\n  let lightbox = null;\n\n  form.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    currentQuery = input.value.trim();\n    currentPage = 1;\n\n    if (!currentQuery) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Please enter a search query!',\n      });\n      return;\n    }\n\n    clearGallery();\n    loader.style.display = 'block';\n    loadMoreBtn.style.display = 'none';\n\n    try {\n      const data = await fetchImages(currentQuery, currentPage);\n      loader.style.display = 'none';\n      totalHits = data.totalHits;\n\n      if (data.hits.length === 0) {\n        iziToast.error({\n            title: 'Error',\n            position: 'topRight',\n          message: 'Sorry, there are no images matching your search query. Please try again!',\n        });\n      } else {\n        renderImages(data.hits);\n        loadMoreBtn.style.display = 'block';\n\n        if (lightbox) {\n          lightbox.refresh();\n        } else {\n          lightbox = new SimpleLightbox('.gallery a', {});\n        }\n\n        if (currentPage * 15 >= totalHits) {\n          loadMoreBtn.style.display = 'none';\n          iziToast.info({\n            title: 'Info',\n            message: \"We're sorry, but you've reached the end of search results.\",\n          });\n        }\n      }\n    } catch (error) {\n      loader.style.display = 'none';\n      iziToast.error({\n        title: 'Error',\n        message: 'Something went wrong. Please try again later.',\n      });\n    } finally {\n      input.value = '';\n    }\n  });\n\n  loadMoreBtn.addEventListener('click', async () => {\n    currentPage += 1;\n    loader.style.display = 'block';\n\n    try {\n      const data = await fetchImages(currentQuery, currentPage);\n      loader.style.display = 'none';\n\n      if (data.hits.length > 0) {\n        renderImages(data.hits);\n        lightbox.refresh();\n\n        \n        const { height: cardHeight } = document.querySelector('.gallery').firstElementChild.getBoundingClientRect();\n        window.scrollBy({\n          top: cardHeight * 2,\n          behavior: 'smooth',\n        });\n\n        if (currentPage * 15 >= totalHits) {\n          loadMoreBtn.style.display = 'none';\n          iziToast.info({\n            title: 'Info',\n            message: \"We're sorry, but you've reached the end of search results.\",\n          });\n        }\n      }\n    } catch (error) {\n      loader.style.display = 'none';\n      iziToast.error({\n        title: 'Error',\n        message: 'Something went wrong. Please try again later.',\n      });\n    }\n  });\n});\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","axios","renderImages","images","gallery","markup","image","clearGallery","form","input","loader","loadMoreBtn","currentPage","currentQuery","totalHits","lightbox","event","iziToast","data","SimpleLightbox","cardHeight"],"mappings":"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"}